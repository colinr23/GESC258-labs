<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Week 7 ANOVA | GESC-258 Schedule</title>
  <meta name="description" content="Schedule, readings, and labs for GESC 258, Winter 2021." />
  <meta name="generator" content="bookdown 0.20 and GitBook 2.6.7" />

  <meta property="og:title" content="Week 7 ANOVA | GESC-258 Schedule" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Schedule, readings, and labs for GESC 258, Winter 2021." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Week 7 ANOVA | GESC-258 Schedule" />
  
  <meta name="twitter:description" content="Schedule, readings, and labs for GESC 258, Winter 2021." />
  

<meta name="author" content="Colin Robertson" />


<meta name="date" content="2021-03-19" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="hypothesis-testing-i.html"/>
<link rel="next" href="linear-regression.html"/>
<script src="libs/header-attrs-2.3/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">GESC 258</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Overview</a></li>
<li class="chapter" data-level="1" data-path="introduction-and-research-design.html"><a href="introduction-and-research-design.html"><i class="fa fa-check"></i><b>1</b> Introduction and Research Design</a>
<ul>
<li class="chapter" data-level="1.1" data-path="introduction-and-research-design.html"><a href="introduction-and-research-design.html#what-we-cover-this-week"><i class="fa fa-check"></i><b>1.1</b> What We Cover this Week</a></li>
<li class="chapter" data-level="1.2" data-path="introduction-and-research-design.html"><a href="introduction-and-research-design.html#readings"><i class="fa fa-check"></i><b>1.2</b> Readings</a></li>
<li class="chapter" data-level="1.3" data-path="introduction-and-research-design.html"><a href="introduction-and-research-design.html#lab"><i class="fa fa-check"></i><b>1.3</b> Lab</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="w2title.html"><a href="w2title.html"><i class="fa fa-check"></i><b>2</b> Probability Distributions - Normal</a>
<ul>
<li class="chapter" data-level="2.1" data-path="w2title.html"><a href="w2title.html#w2cover"><i class="fa fa-check"></i><b>2.1</b> What we cover this week</a></li>
<li class="chapter" data-level="2.2" data-path="w2title.html"><a href="w2title.html#w2read"><i class="fa fa-check"></i><b>2.2</b> Readings</a></li>
<li class="chapter" data-level="2.3" data-path="w2title.html"><a href="w2title.html#w2lab"><i class="fa fa-check"></i><b>2.3</b> Lab</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="w2title.html"><a href="w2title.html#w2data"><i class="fa fa-check"></i><b>2.3.1</b> Tree Circumference Data</a></li>
<li class="chapter" data-level="2.3.2" data-path="w2title.html"><a href="w2title.html#recalling-measures-of-central-tendency-and-dispersion"><i class="fa fa-check"></i><b>2.3.2</b> Recalling measures of central tendency and dispersion</a></li>
<li class="chapter" data-level="2.3.3" data-path="w2title.html"><a href="w2title.html#the-normal-distribution"><i class="fa fa-check"></i><b>2.3.3</b> The Normal Distribution</a></li>
<li class="chapter" data-level="2.3.4" data-path="w2title.html"><a href="w2title.html#using-z-scores-instead-of-raw-data-to-more-easily-find-probabilities-from-a-normal-distribution"><i class="fa fa-check"></i><b>2.3.4</b> Using z-scores instead of raw data to more easily find probabilities from a normal distribution</a></li>
<li class="chapter" data-level="2.3.5" data-path="w2title.html"><a href="w2title.html#assignment"><i class="fa fa-check"></i><b>2.3.5</b> Assignment</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="w3title.html"><a href="w3title.html"><i class="fa fa-check"></i><b>3</b> Probability Distributions II - Others</a>
<ul>
<li class="chapter" data-level="3.1" data-path="w3title.html"><a href="w3title.html#w3cover"><i class="fa fa-check"></i><b>3.1</b> What we cover this week</a></li>
<li class="chapter" data-level="3.2" data-path="w3title.html"><a href="w3title.html#w3read"><i class="fa fa-check"></i><b>3.2</b> Readings</a></li>
<li class="chapter" data-level="3.3" data-path="w3title.html"><a href="w3title.html#w3lab"><i class="fa fa-check"></i><b>3.3</b> Lab</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="w3title.html"><a href="w3title.html#how-does-honeycomb-patterns-in-sandstone-form"><i class="fa fa-check"></i><b>3.3.1</b> How does honeycomb patterns in sandstone form?</a></li>
<li class="chapter" data-level="3.3.2" data-path="w3title.html"><a href="w3title.html#study-image"><i class="fa fa-check"></i><b>3.3.2</b> Study Image</a></li>
<li class="chapter" data-level="3.3.3" data-path="w3title.html"><a href="w3title.html#analyzing-count-data"><i class="fa fa-check"></i><b>3.3.3</b> Analyzing Count Data</a></li>
<li class="chapter" data-level="3.3.4" data-path="w3title.html"><a href="w3title.html#w3assign"><i class="fa fa-check"></i><b>3.3.4</b> Assignment</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="w4title.html"><a href="w4title.html"><i class="fa fa-check"></i><b>4</b> Sampling Distributions and Confidence Intervals</a>
<ul>
<li class="chapter" data-level="4.1" data-path="w4title.html"><a href="w4title.html#w4cover"><i class="fa fa-check"></i><b>4.1</b> What we cover this week</a></li>
<li class="chapter" data-level="4.2" data-path="w4title.html"><a href="w4title.html#w4read"><i class="fa fa-check"></i><b>4.2</b> Readings</a></li>
<li class="chapter" data-level="4.3" data-path="w4title.html"><a href="w4title.html#w4lab"><i class="fa fa-check"></i><b>4.3</b> Lab</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="w4title.html"><a href="w4title.html#sampling-distribution-of-the-mean"><i class="fa fa-check"></i><b>4.3.1</b> Sampling Distribution of the Mean</a></li>
<li class="chapter" data-level="4.3.2" data-path="w4title.html"><a href="w4title.html#confidence-intervals"><i class="fa fa-check"></i><b>4.3.2</b> Confidence Intervals</a></li>
<li class="chapter" data-level="4.3.3" data-path="w4title.html"><a href="w4title.html#w4assign"><i class="fa fa-check"></i><b>4.3.3</b> Assignment</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="hypothesis-testing-concepts.html"><a href="hypothesis-testing-concepts.html"><i class="fa fa-check"></i><b>5</b> Hypothesis Testing Concepts</a>
<ul>
<li class="chapter" data-level="5.1" data-path="hypothesis-testing-concepts.html"><a href="hypothesis-testing-concepts.html#w6cover"><i class="fa fa-check"></i><b>5.1</b> What we cover this week</a></li>
<li class="chapter" data-level="5.2" data-path="hypothesis-testing-concepts.html"><a href="hypothesis-testing-concepts.html#w6read"><i class="fa fa-check"></i><b>5.2</b> Readings</a></li>
<li class="chapter" data-level="5.3" data-path="hypothesis-testing-concepts.html"><a href="hypothesis-testing-concepts.html#w6lab"><i class="fa fa-check"></i><b>5.3</b> Lab</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="hypothesis-testing-concepts.html"><a href="hypothesis-testing-concepts.html#w6assign"><i class="fa fa-check"></i><b>5.3.1</b> Assignment</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="hypothesis-testing-i.html"><a href="hypothesis-testing-i.html"><i class="fa fa-check"></i><b>6</b> Hypothesis Testing I</a>
<ul>
<li class="chapter" data-level="6.1" data-path="hypothesis-testing-i.html"><a href="hypothesis-testing-i.html#w7cover"><i class="fa fa-check"></i><b>6.1</b> What we cover this week</a></li>
<li class="chapter" data-level="6.2" data-path="hypothesis-testing-i.html"><a href="hypothesis-testing-i.html#w7read"><i class="fa fa-check"></i><b>6.2</b> Readings</a></li>
<li class="chapter" data-level="6.3" data-path="hypothesis-testing-i.html"><a href="hypothesis-testing-i.html#w7lab"><i class="fa fa-check"></i><b>6.3</b> Lab</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="hypothesis-testing-i.html"><a href="hypothesis-testing-i.html#examining-with-fake-data"><i class="fa fa-check"></i><b>6.3.1</b> Examining with Fake Data</a></li>
<li class="chapter" data-level="6.3.2" data-path="hypothesis-testing-i.html"><a href="hypothesis-testing-i.html#one-sample-hypothesis-testing"><i class="fa fa-check"></i><b>6.3.2</b> One-Sample Hypothesis Testing</a></li>
<li class="chapter" data-level="6.3.3" data-path="hypothesis-testing-i.html"><a href="hypothesis-testing-i.html#two-sample-hypothesis-testing"><i class="fa fa-check"></i><b>6.3.3</b> Two-Sample Hypothesis Testing</a></li>
<li class="chapter" data-level="6.3.4" data-path="hypothesis-testing-i.html"><a href="hypothesis-testing-i.html#gps-dataset"><i class="fa fa-check"></i><b>6.3.4</b> GPS Dataset</a></li>
<li class="chapter" data-level="6.3.5" data-path="hypothesis-testing-i.html"><a href="hypothesis-testing-i.html#lab-assignment"><i class="fa fa-check"></i><b>6.3.5</b> Lab Assignment</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="anova.html"><a href="anova.html"><i class="fa fa-check"></i><b>7</b> ANOVA</a>
<ul>
<li class="chapter" data-level="7.1" data-path="anova.html"><a href="anova.html#w8cover"><i class="fa fa-check"></i><b>7.1</b> What we cover this week</a></li>
<li class="chapter" data-level="7.2" data-path="anova.html"><a href="anova.html#w8read"><i class="fa fa-check"></i><b>7.2</b> Readings</a></li>
<li class="chapter" data-level="7.3" data-path="anova.html"><a href="anova.html#w8lab"><i class="fa fa-check"></i><b>7.3</b> Lab</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="anova.html"><a href="anova.html#analysis-of-variance-in-r"><i class="fa fa-check"></i><b>7.3.1</b> Analysis of Variance in R</a></li>
<li class="chapter" data-level="7.3.2" data-path="anova.html"><a href="anova.html#w8labass"><i class="fa fa-check"></i><b>7.3.2</b> Lab Assignment</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="linear-regression.html"><a href="linear-regression.html"><i class="fa fa-check"></i><b>8</b> Linear Regression</a>
<ul>
<li class="chapter" data-level="8.1" data-path="linear-regression.html"><a href="linear-regression.html#w9cover"><i class="fa fa-check"></i><b>8.1</b> What we cover this week</a></li>
<li class="chapter" data-level="8.2" data-path="linear-regression.html"><a href="linear-regression.html#w9read"><i class="fa fa-check"></i><b>8.2</b> Readings</a></li>
<li class="chapter" data-level="8.3" data-path="linear-regression.html"><a href="linear-regression.html#w9lab"><i class="fa fa-check"></i><b>8.3</b> Lab</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="linear-regression.html"><a href="linear-regression.html#w9labass"><i class="fa fa-check"></i><b>8.3.1</b> Lab Assignment</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li> &nbsp Instructor: Dr. Colin Robertson</li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">GESC-258 Schedule</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="anova" class="section level1" number="7">
<h1><span class="header-section-number">Week 7</span> ANOVA</h1>
<p>This week we introduce the analysis of variance method for comparing multiple group means.</p>
<div id="w8cover" class="section level2" number="7.1">
<h2><span class="header-section-number">7.1</span> What we cover this week</h2>
<ul>
<li>Hypothesis testing for more than two means</li>
</ul>
</div>
<div id="w8read" class="section level2" number="7.2">
<h2><span class="header-section-number">7.2</span> Readings</h2>
<p><a href="https://onlinestatbook.com/2/analysis_of_variance/one-way.html" target="_blank">Chapter XV in online textbook</a></p>
<p>Key sections:</p>
<ul>
<li>all</li>
</ul>
</div>
<div id="w8lab" class="section level2" number="7.3">
<h2><span class="header-section-number">7.3</span> Lab</h2>
<p>This lab is due on the Dropbox on MyLearningSpace on <strong>Friday March 19th</strong></p>
<p>Someone suggested in lecture we analyze snowfall data, so let’s do it. There are many places to pull weather/climate data online, most of which draw their source data from Environment Canada weather station network. There is an <code>r</code> package to pull data directly into <code>r</code> from the Environment Canada API, but we will use another site <a href="https://www.weatherstats.ca/">weatherstats.ca</a> which has a nice dasboard interface onto the EC data. However if we want to do some statistical analysis ourselves we need to bring this data into<code>r</code>.</p>
<p>We will compare snowfall in three Ontario cities, Hamilton, Toronto, and Ottawa. I have done the heavy lifting in taking data from <a href="https://ottawa.weatherstats.ca/charts/snow-yearly.html">https://ottawa.weatherstats.ca/</a>, <a href="https://toronto.weatherstats.ca/charts/snow-yearly.html">https://toronto.weatherstats.ca/</a>, and <a href="https://hamilton.weatherstats.ca/charts/snow-yearly.html">https://hamilton.weatherstats.ca/</a> and formatted it into a nice <code>data.frame</code> object which you can read in as follows:</p>
<div class="sourceCode" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb104-1"><a href="anova.html#cb104-1" aria-hidden="true"></a>x &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;https://www.dropbox.com/s/ze5saukvq1tjzbs/snow.csv?dl=1&quot;</span>)</span></code></pre></div>
<p>Now let’s take a look at this dataset:</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="anova.html#cb105-1" aria-hidden="true"></a><span class="kw">names</span>(x) <span class="co">#check out the column names to see what variables we have</span></span></code></pre></div>
<pre><code>## [1] &quot;Year&quot; &quot;Snow&quot; &quot;City&quot;</code></pre>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb107-1"><a href="anova.html#cb107-1" aria-hidden="true"></a><span class="kw">head</span>(x)  <span class="co">#check out first few rows</span></span></code></pre></div>
<pre><code>##   Year       Snow    City
## 1 1996  122.4 cm  Toronto
## 2 1997  143.6 cm  Toronto
## 3 1998   61.5 cm  Toronto
## 4 1999  117.8 cm  Toronto
## 5 2000  135.7 cm  Toronto
## 6 2001   81.6 cm  Toronto</code></pre>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb109-1"><a href="anova.html#cb109-1" aria-hidden="true"></a><span class="kw">tail</span>(x)  <span class="co">#check out last few rows</span></span></code></pre></div>
<pre><code>##     Year       Snow   City
## 95  2015  176.8 cm  Ottawa
## 96  2016  312.9 cm  Ottawa
## 97  2017  258.4 cm  Ottawa
## 98  2018  247.4 cm  Ottawa
## 99  2019  269.7 cm  Ottawa
## 100 2020  190.6 cm  Ottawa</code></pre>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb111-1"><a href="anova.html#cb111-1" aria-hidden="true"></a><span class="kw">nrow</span>(x)  <span class="co">#see total number of rows in the dataset</span></span></code></pre></div>
<pre><code>## [1] 100</code></pre>
<p>Well we can see that there are 100 rows, where each row corresponds to year annual total snowfall in a particular city. Let’s checkout what cities/years of data are here:</p>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="anova.html#cb113-1" aria-hidden="true"></a><span class="kw">unique</span>(x<span class="op">$</span>City)</span></code></pre></div>
<pre><code>## [1] &quot;Toronto&quot;  &quot;Hamilton&quot; &quot;Montreal&quot; &quot;Ottawa&quot;</code></pre>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb115-1"><a href="anova.html#cb115-1" aria-hidden="true"></a><span class="kw">summary</span>(x<span class="op">$</span>Year)</span></code></pre></div>
<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##    1996    2002    2008    2008    2014    2020</code></pre>
<p>So we have four cities, and data ranging from 1996 to 2020. Our variable of interest here is snowfall, which is recorded in centimeters. Unfortunately, we have the units ‘cm’ stored as data - something which happens a lot but can make analysis more complicated. As it stands now, <code>r</code> has no way of knowing that the values in the <code>Snow</code> column are numeric, so the values also has text. We can verify this by checking the class of the column</p>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb117-1"><a href="anova.html#cb117-1" aria-hidden="true"></a><span class="kw">class</span>(x<span class="op">$</span>Snow)</span></code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
<p>which means it is character (i.e., text). We need to just pull out the numeric part of the values in the <code>Snow</code> column so that we can analyze them statistically. If you try to do analysis of the data now you will get an error:</p>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb119-1"><a href="anova.html#cb119-1" aria-hidden="true"></a><span class="kw">mean</span>(x<span class="op">$</span>Snow)</span></code></pre></div>
<pre><code>## [1] NA</code></pre>
<p>so we look at the values and look for a pattern for what exactly we want:</p>
<div class="sourceCode" id="cb121"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb121-1"><a href="anova.html#cb121-1" aria-hidden="true"></a><span class="kw">head</span>(x<span class="op">$</span>Snow, <span class="dv">10</span>)</span></code></pre></div>
<pre><code>##  [1] &quot; 122.4 cm &quot; &quot; 143.6 cm &quot; &quot; 61.5 cm &quot;  &quot; 117.8 cm &quot; &quot; 135.7 cm &quot;
##  [6] &quot; 81.6 cm &quot;  &quot; 114.9 cm &quot; &quot; 129.6 cm &quot; &quot; 134.9 cm &quot; &quot; 162.6 cm &quot;</code></pre>
<p>there are a few of things to take notice of. The numbers part of the values in <code>x$Snow</code> are surrounded by blank spaces. Also, there is an empty space after the “cm” part. What we need to do is a little <a href="https://www.google.com/search?sxsrf=ALeKk0045-oG5yzUORUOqDvhNGsQTyA9Sg%3A1615327082058&amp;ei=au9HYImRA5Tz-gTV8qagBQ&amp;q=string+parsing+in+r&amp;oq=string+parsing+in+r&amp;gs_lcp=Cgdnd3Mtd2l6EAMyAggAMgIIADIGCAAQFhAeMgYIABAWEB4yBggAEBYQHjIGCAAQFhAeMgYIABAWEB4yBggAEBYQHjIGCAAQFhAeOgcIABCwAxBDOgcIABBHELADOgQIABBDOgcIABCHAhAUULU7WIFAYJNBaAFwAngAgAF1iAH6A5IBAzUuMZgBAKABAaoBB2d3cy13aXrIAQrAAQE&amp;sclient=gws-wiz&amp;ved=0ahUKEwiJ7q-nmqTvAhWUuZ4KHVW5CVQQ4dUDCA0&amp;uact=5">string parsing</a> - much of learning <code>r</code> or any other technical skill often boils down to knowing what to Google. The best library for doing this kind of thing in <code>r</code> is called <code>stringr</code> - which you will have to install with <code>install.packages('stringr')</code> before you can load it.</p>
<p>Let’s formulate a set of rules for exactly how we want to pull out the numeric part of the values in the <code>x$Snow</code> data.</p>
<ol style="list-style-type: decimal">
<li>get rid of trailing spaces</li>
<li>pull out everything up to the first space</li>
<li>convert output of 2 to a numeric variable</li>
</ol>
<p>This is really easy to do in <code>r</code> but would be tedious and annoying to do by hand. We will wrap our examples in the <code>head</code> function so we just see the first few rows of output</p>
<div class="sourceCode" id="cb123"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb123-1"><a href="anova.html#cb123-1" aria-hidden="true"></a><span class="kw">library</span>(stringr)</span>
<span id="cb123-2"><a href="anova.html#cb123-2" aria-hidden="true"></a><span class="kw">head</span>(<span class="kw">str_trim</span>(x<span class="op">$</span>Snow)) <span class="co">#get rid of trailing spaces using str_trim</span></span></code></pre></div>
<pre><code>## [1] &quot;122.4 cm&quot; &quot;143.6 cm&quot; &quot;61.5 cm&quot;  &quot;117.8 cm&quot; &quot;135.7 cm&quot; &quot;81.6 cm&quot;</code></pre>
<div class="sourceCode" id="cb125"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb125-1"><a href="anova.html#cb125-1" aria-hidden="true"></a><span class="co">#now a little stringr magic:</span></span>
<span id="cb125-2"><a href="anova.html#cb125-2" aria-hidden="true"></a>x<span class="op">$</span>snowcm &lt;-<span class="st"> </span><span class="kw">str_trim</span>(<span class="kw">str_sub</span>(<span class="kw">str_trim</span>(x<span class="op">$</span>Snow), <span class="dt">start =</span> <span class="dv">1</span>, <span class="dt">end =</span> <span class="kw">str_locate</span>(<span class="kw">str_trim</span>(x<span class="op">$</span>Snow), <span class="st">&quot; &quot;</span>)[,<span class="dv">1</span>]))</span>
<span id="cb125-3"><a href="anova.html#cb125-3" aria-hidden="true"></a><span class="kw">class</span>(x<span class="op">$</span>snowcm)</span></code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
<p>which shows we’re almost there, we just have to <a href="https://www.google.com/search?q=How+do+I+convert+character+to+numeric+in+R%3F&amp;oq=How+do+I+convert+character+to+numeric+in+R%3F&amp;aqs=chrome..69i57.423j0j9&amp;sourceid=chrome&amp;ie=UTF-8">convert it to numeric</a> in r which we can do now with <code>as.numeric</code> as follows:</p>
<div class="sourceCode" id="cb127"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb127-1"><a href="anova.html#cb127-1" aria-hidden="true"></a>x<span class="op">$</span>snowcm &lt;-<span class="st"> </span><span class="kw">as.numeric</span>(x<span class="op">$</span>snowcm)</span>
<span id="cb127-2"><a href="anova.html#cb127-2" aria-hidden="true"></a><span class="kw">summary</span>(x<span class="op">$</span>snowcm)</span></code></pre></div>
<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##    32.4   122.4   166.3   171.9   203.5   374.1</code></pre>
<div class="sourceCode" id="cb129"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb129-1"><a href="anova.html#cb129-1" aria-hidden="true"></a><span class="kw">hist</span>(x<span class="op">$</span>snowcm)</span></code></pre></div>
<p><img src="GESC258-2020_files/figure-html/unnamed-chunk-69-1.png" width="672" /></p>
<p>OK so we now have total snowfall by city by year, which we can use to do our analysis.</p>
<div id="analysis-of-variance-in-r" class="section level3" number="7.3.1">
<h3><span class="header-section-number">7.3.1</span> Analysis of Variance in R</h3>
<p>We have just looked at doing a hypothesis test for a difference between two means. But what if we want to test for differences across three means? Or five? This is very common – when you have a categorical demographic variable, and you want to compare a numeric variable across the categories.</p>
<p>We can set up a hypothesis test for multiple groups by comparing the variation between and within groups of data. This approach is called Analysis Of Variance (ANOVA). For ANOVA, we use a test statistic that is a ratio of sums of squares, and it follows an <a href="https://magoosh.com/statistics/f-distribution-explained/">F distribution</a> and is therefore called an F statistic.</p>
<p>The F statistic can be calculated for ANOVA as:</p>
<p><span class="math inline">\(F=\frac{MSB}{MSE}\)</span></p>
<p>Where MSB is the mean squares between groups, and MSE is the mean squares within groups. Refer to lecture notes for full description of these terms.</p>
<div id="mean-squares-between-msb" class="section level4" number="7.3.1.1">
<h4><span class="header-section-number">7.3.1.1</span> Mean Squares Between (MSB)</h4>
<p>We will focus now on the <code>MSB</code> part in the equation above. This is the ‘mean squares between’ - which quantifies the amount of ‘between group differences’. If this is high the F goes above 1 and we have evidence of between group differences in means. As noted in lecture, the MSB is</p>
<p><span class="math inline">\(MSB = \frac{BSS}{k-1}\)</span></p>
<p>where <code>BSS</code> is between group sums of squares and k is the number of groups being compared.</p>
<p><span class="math inline">\(BSS = \sum{n_i}(\bar{x_i}-\bar{\bar{x}})^2\)</span></p>
<p>where <span class="math inline">\(\bar{x}_i\)</span> is the mean from the ‘i’th’ group, and <span class="math inline">\(\bar{\bar{x}}\)</span> is the grand mean. Let’s think about how to calculate these pieces. The <span class="math inline">\(\bar{x}_i\)</span> are easy enough they are the sample means. Let’s examine on the golf club data below (use ANOVA lecture slides to compare):</p>
<div class="sourceCode" id="cb130"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb130-1"><a href="anova.html#cb130-1" aria-hidden="true"></a>c1 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">254</span>,<span class="dv">263</span>,<span class="dv">241</span>,<span class="dv">237</span>,<span class="dv">251</span>) <span class="co">#sample data 1</span></span>
<span id="cb130-2"><a href="anova.html#cb130-2" aria-hidden="true"></a>c2 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">234</span>,<span class="dv">218</span>,<span class="dv">235</span>,<span class="dv">227</span>,<span class="dv">216</span>) <span class="co">#sample data 2</span></span>
<span id="cb130-3"><a href="anova.html#cb130-3" aria-hidden="true"></a>c3 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">200</span>,<span class="dv">222</span>,<span class="dv">197</span>,<span class="dv">206</span>,<span class="dv">204</span>) <span class="co">#sample data 3</span></span>
<span id="cb130-4"><a href="anova.html#cb130-4" aria-hidden="true"></a>xb1 &lt;-<span class="st"> </span><span class="kw">mean</span>(c1) <span class="co">#sample mean 1</span></span>
<span id="cb130-5"><a href="anova.html#cb130-5" aria-hidden="true"></a>xb2 &lt;-<span class="st"> </span><span class="kw">mean</span>(c2) <span class="co">#sample mean 2</span></span>
<span id="cb130-6"><a href="anova.html#cb130-6" aria-hidden="true"></a>xb3 &lt;-<span class="st"> </span><span class="kw">mean</span>(c3) <span class="co">#sample mean 3</span></span>
<span id="cb130-7"><a href="anova.html#cb130-7" aria-hidden="true"></a>gm &lt;-<span class="st"> </span><span class="kw">mean</span>(<span class="kw">c</span>(xb1, xb2, xb3)) <span class="co">#grand mean</span></span></code></pre></div>
<p>Therefore <code>BSS</code> becomes:</p>
<div class="sourceCode" id="cb131"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb131-1"><a href="anova.html#cb131-1" aria-hidden="true"></a>BSS &lt;-<span class="st"> </span><span class="dv">5</span> <span class="op">*</span><span class="st"> </span>(xb1<span class="op">-</span>gm)<span class="op">^</span><span class="dv">2</span> <span class="op">+</span><span class="st"> </span><span class="dv">5</span> <span class="op">*</span><span class="st"> </span>(xb2<span class="op">-</span>gm)<span class="op">^</span><span class="dv">2</span> <span class="op">+</span><span class="st"> </span><span class="dv">5</span> <span class="op">*</span><span class="st"> </span>(xb3<span class="op">-</span>gm)<span class="op">^</span><span class="dv">2</span></span>
<span id="cb131-2"><a href="anova.html#cb131-2" aria-hidden="true"></a>BSS</span></code></pre></div>
<pre><code>## [1] 4716.4</code></pre>
</div>
<div id="mean-squares-error-mse" class="section level4" number="7.3.1.2">
<h4><span class="header-section-number">7.3.1.2</span> Mean Squares Error (MSE)</h4>
<p>And <code>ESS</code> is the within-group sum of squares (or error sum of squares) which is</p>
<p><span class="math inline">\(ESS = \sum_{i=1}^k{}\sum_{j=1}^n{(x_{ij}-\bar{x_j})^2}\)</span></p>
<p>or</p>
<div class="sourceCode" id="cb133"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb133-1"><a href="anova.html#cb133-1" aria-hidden="true"></a>ESS &lt;-<span class="st"> </span><span class="kw">sum</span>((c1<span class="op">-</span>xb1)<span class="op">^</span><span class="dv">2</span>) <span class="op">+</span><span class="st"> </span><span class="kw">sum</span>((c2<span class="op">-</span>xb2)<span class="op">^</span><span class="dv">2</span>) <span class="op">+</span><span class="st"> </span><span class="kw">sum</span>((c3<span class="op">-</span>xb3)<span class="op">^</span><span class="dv">2</span>)</span>
<span id="cb133-2"><a href="anova.html#cb133-2" aria-hidden="true"></a>ESS</span></code></pre></div>
<pre><code>## [1] 1119.6</code></pre>
<p>therefore:</p>
<div class="sourceCode" id="cb135"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb135-1"><a href="anova.html#cb135-1" aria-hidden="true"></a>MSB &lt;-<span class="st"> </span>BSS<span class="op">/</span><span class="dv">2</span></span>
<span id="cb135-2"><a href="anova.html#cb135-2" aria-hidden="true"></a>MSE &lt;-<span class="st"> </span>ESS<span class="op">/</span><span class="dv">12</span></span>
<span id="cb135-3"><a href="anova.html#cb135-3" aria-hidden="true"></a>Fstat &lt;-<span class="st"> </span>MSB<span class="op">/</span>MSE</span>
<span id="cb135-4"><a href="anova.html#cb135-4" aria-hidden="true"></a>Fstat</span></code></pre></div>
<pre><code>## [1] 25.27546</code></pre>
<p>then get the appropriate F-crit</p>
<div class="sourceCode" id="cb137"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb137-1"><a href="anova.html#cb137-1" aria-hidden="true"></a><span class="kw">qf</span>(.<span class="dv">05</span>, <span class="dt">df1=</span><span class="dv">2</span>, <span class="dt">df2=</span><span class="dv">12</span>, <span class="dt">lower.tail =</span> <span class="ot">FALSE</span>)</span></code></pre></div>
<pre><code>## [1] 3.885294</code></pre>
<p>and make our conclusion.</p>
<p>For any model, we do get the F statistic hypothesis test as the last line in the output. The hypothesis being tested is that the F is equal to 1, the alternate is that it is not equal to one. The F distribution is used to characterize the f statistic (surprise). Because this is a ratio of positive numbers (both are sums of squares), the F takes on only positive numbers. The shape of the F statistic is as below.</p>
<div class="sourceCode" id="cb139"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb139-1"><a href="anova.html#cb139-1" aria-hidden="true"></a>fdata3 &lt;-<span class="st"> </span><span class="kw">df</span>(<span class="kw">seq</span>(<span class="dv">0</span>,<span class="dv">5</span>,.<span class="dv">01</span>), <span class="dt">df1=</span><span class="dv">4</span>, <span class="dt">df2=</span><span class="dv">3</span>)</span>
<span id="cb139-2"><a href="anova.html#cb139-2" aria-hidden="true"></a>fdata2 &lt;-<span class="st"> </span><span class="kw">df</span>(<span class="kw">seq</span>(<span class="dv">0</span>,<span class="dv">5</span>,.<span class="dv">01</span>), <span class="dt">df1=</span><span class="dv">5</span>, <span class="dt">df2=</span><span class="dv">5</span>)</span>
<span id="cb139-3"><a href="anova.html#cb139-3" aria-hidden="true"></a>fdata1 &lt;-<span class="st"> </span><span class="kw">df</span>(<span class="kw">seq</span>(<span class="dv">0</span>,<span class="dv">5</span>,.<span class="dv">01</span>), <span class="dt">df1=</span><span class="dv">6</span>, <span class="dt">df2=</span><span class="dv">10</span>)</span>
<span id="cb139-4"><a href="anova.html#cb139-4" aria-hidden="true"></a><span class="kw">plot</span>(<span class="kw">seq</span>(<span class="dv">0</span>,<span class="dv">5</span>,.<span class="dv">01</span>), fdata1, <span class="dt">type=</span><span class="st">&quot;l&quot;</span>, <span class="dt">ylab =</span> <span class="st">&quot;Probability density&quot;</span>, <span class="dt">xlab=</span><span class="st">&quot;F-Statistic&quot;</span>)</span>
<span id="cb139-5"><a href="anova.html#cb139-5" aria-hidden="true"></a><span class="kw">lines</span>(<span class="kw">seq</span>(<span class="dv">0</span>,<span class="dv">5</span>,.<span class="dv">01</span>), fdata2, <span class="dt">type=</span><span class="st">&quot;l&quot;</span>, <span class="dt">col=</span><span class="st">&quot;red&quot;</span>)</span>
<span id="cb139-6"><a href="anova.html#cb139-6" aria-hidden="true"></a><span class="kw">lines</span>(<span class="kw">seq</span>(<span class="dv">0</span>,<span class="dv">5</span>,.<span class="dv">01</span>), fdata3, <span class="dt">type=</span><span class="st">&quot;l&quot;</span>, <span class="dt">col=</span><span class="st">&quot;blue&quot;</span>)</span></code></pre></div>
<p><img src="GESC258-2020_files/figure-html/unnamed-chunk-75-1.png" width="672" /></p>
<p>These are just some examples of possible f distributions. As with any hypothesis test, we compare the observed value of an F statistic to a critical value from the distribution, for a given alpha (significance level). Or we just compare the p-value to our alpha.</p>
<p>Key things to note about the F distribution, we now have two degrees of freedom, one for the numerator and one for the denominator. In the end you don’t have to know too much detail about it because the way we use it is the same as the normal and t distributions, we compute a value of the test statistic for our data and compare it a sampling distribution associated with the null hypothesis. We then make a conclusion about our hypothesis based on this comparison (i.e., reject or fail to reject).</p>
<p>Finally, if our data are formatted as a table, we can use the built in <code>anova</code> function to compare means</p>
<div class="sourceCode" id="cb140"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb140-1"><a href="anova.html#cb140-1" aria-hidden="true"></a>ranges &lt;-<span class="st"> </span><span class="kw">c</span>(c1, c2, c3)</span>
<span id="cb140-2"><a href="anova.html#cb140-2" aria-hidden="true"></a>clubs &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="kw">rep</span>(<span class="st">&quot;C1&quot;</span>, <span class="dv">5</span>), <span class="kw">rep</span>(<span class="st">&quot;C2&quot;</span>, <span class="dv">5</span>), <span class="kw">rep</span>(<span class="st">&quot;C3&quot;</span>, <span class="dv">5</span>))</span>
<span id="cb140-3"><a href="anova.html#cb140-3" aria-hidden="true"></a>df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(ranges, clubs)</span>
<span id="cb140-4"><a href="anova.html#cb140-4" aria-hidden="true"></a><span class="kw">anova</span>(<span class="kw">lm</span>(ranges<span class="op">~</span>clubs, <span class="dt">data=</span>df))</span></code></pre></div>
<pre><code>## Analysis of Variance Table
## 
## Response: ranges
##           Df Sum Sq Mean Sq F value    Pr(&gt;F)    
## clubs      2 4716.4  2358.2  25.276 4.985e-05 ***
## Residuals 12 1119.6    93.3                      
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1</code></pre>
</div>
</div>
<div id="w8labass" class="section level3" number="7.3.2">
<h3><span class="header-section-number">7.3.2</span> Lab Assignment</h3>
<ol style="list-style-type: decimal">
<li><p>Use ANOVA to compare whether snowfall differs among the four cities in the dataset. State your hypothesis, test statistics, p-value and a sentence interpreting your result. Can use built in function or manual method - either are OK. (out of 5)</p></li>
<li><p>Use ANOVA to compare whether snowfall differs among (any) three of the four cities in the dataset. State your hypothesis, test statistics, p-value and a sentence interpreting your result. Can use built in function or manual method - either are OK. (out of 5)</p></li>
<li><p>Conduct some analysis of your choosing on the snow dataset to explore a question you find interesting. You can incorporate external data if you want. You can use any approach you want including but not limited to hypothesis testing, graphs, confidence intervals etc. Write up a paragraph interepreting your analysis - discuss any limitations (out of 10)</p></li>
<li><p>One of the foundational assumptions of classical statistical inference is that observations are indepenent. Can you think of any potential violations to this assumption with the snow dataset? (out of 5)</p></li>
</ol>
<p><strong>Bonus question:</strong>
Explain in detail (i.e., what each function is doing) what is happening in this step below</p>
<div class="sourceCode" id="cb142"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb142-1"><a href="anova.html#cb142-1" aria-hidden="true"></a><span class="co">#now a little stringr magic:</span></span>
<span id="cb142-2"><a href="anova.html#cb142-2" aria-hidden="true"></a>x<span class="op">$</span>snowcm &lt;-<span class="st"> </span><span class="kw">str_trim</span>(<span class="kw">str_sub</span>(<span class="kw">str_trim</span>(x<span class="op">$</span>Snow), <span class="dt">start =</span> <span class="dv">1</span>, <span class="dt">end =</span> <span class="kw">str_locate</span>(<span class="kw">str_trim</span>(x<span class="op">$</span>Snow), <span class="st">&quot; &quot;</span>)[,<span class="dv">1</span>]))</span></code></pre></div>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="hypothesis-testing-i.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="linear-regression.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["GESC258-2020.pdf", "GESC258-2020.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
